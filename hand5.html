<!DOCTYPE html>
<html>
<head>
  <script src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.js"></script>
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.css">
  <script src='https://cdn.jsdelivr.net/npm/bignumber.js@9.1.0/bignumber.min.js'></script>
</head>
<body>
  <div id="example"></div>

  <script type="module">
    import {afterval} from './afterval_essai_de_hand5.js'

function ageValidator(value, callback) {
      if (value >= 18 && value <= 65) {
        // Valid value
        callback(true);
      } else {
        // Invalid value
        callback(false);
      }
    }



    var data = [
      [1, 'John', 11],
      [2, 'Jane', 22],
      [3, 'Mike', ''],
      [4, 'Emily', 12]
    ];

    var hot = new Handsontable(document.getElementById('example'), {
      data: data,
      comments:true,
      columns: [
        {data:0},
        {data:1},
        {
          data: 2,
          validator: ageValidator
        }
      ],
      //afterValidate: afterval
      // afterValidate: (oldvalue, row, prop, source, ...otherArgs) => {
      //       return afterval(oldvalue, row, prop, source, ...otherArgs, hot);
      //     },

      afterValidate: (isValid, value, row, prop, source, ...otherArgs) => {
            const hotInstance = hot; // Store the hot instance
            afterval(isValid, value, row, prop, source, ...otherArgs, hotInstance);

            //return afterval(oldvalue, row, prop, source, ...otherArgs, hot);
          },

    });
  </script>
</body>
</html>
