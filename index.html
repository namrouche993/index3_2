<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Custom Editor in Handsontable</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.css">
  <script src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.js"></script>
</head>
<body>
  <div id="example"></div>

  <script>


  
  const hot = new Handsontable(document.getElementById('example'), {
    data: [
    ['','','',''],
    ['','','',''],
    ['','','',''],
    ['','','',''],
    ['','','',''],
    ['','','',''],
    ['','','','']
  ],
  columns: [
    { data: 'id', type: 'numeric' },
    { data: 'date'},
    { data: 'email', editor: 'text' },
    { data: 'phone', editor: 'text' },
  ],
  beforeKeyDown: function (event) {  
    console.log('--------- start beforekeydown -----------')  
    console.log(event)
    var cellpercent = this.getActiveEditor().TEXTAREA; // Get the DOM element representing the cell editor
    console.log('cellpercent : ')
    console.log(cellpercent)
    console.log('thisgetactiveeditor getvalue and ..length')
    console.log(this.getActiveEditor().getValue().toString()==null)
    console.log(this.getActiveEditor().getValue().toString()=='')
    console.log(this.getActiveEditor().getValue().toString()==' ')
    console.log('length of thisgetactiveditorgetvalue : '+this.getActiveEditor().getValue().length)
    if( ( (this.getActiveEditor().getValue().length==1 && this.getActiveEditor().getValue().toString()!=' ') && !isNaN(Number(event.key)) ) || (this.getActiveEditor().getValue().length==4 && !isNaN(Number(event.key))) ){
      console.log('inside con')
      console.log(event.key)
      if( !isNaN(Number(event.key)) ){
        this.getActiveEditor().setValue(this.getActiveEditor().getValue() + event.key + '/');
        event.stopImmediatePropagation();
        event.preventDefault();
      }
    } else if( ( (this.getActiveEditor().getValue().length==3 ) && event.key=='/' ) || ( (this.getActiveEditor().getValue().length==6 ) && event.key=='/' ) ){
        console.log('second condition ')
        this.getActiveEditor().setValue(this.getActiveEditor().getValue() );
        event.stopImmediatePropagation();
        event.preventDefault();
    }
      /*
    if(this.getActiveEditor().getValue().length==2 || this.getActiveEditor().getValue().length==5 ){
      console.log('now we put slash')
          if( !isNaN(Number(event.key))){
            this.getActiveEditor().setValue(this.getActiveEditor().getValue() + '/'+event.key);
            //cellpercent.setSelectionRange(cellpercent.value.length-1, cellpercent.value.length-1); // Set the new cursor position
            event.stopImmediatePropagation();
            event.preventDefault();
           } else if (event.key=='-'){
            this.getActiveEditor().setValue(this.getActiveEditor().getValue() + '/');
            event.stopImmediatePropagation();
            event.preventDefault();
           }
          }
          */
    //this.getActiveEditor().setValue(this.getActiveEditor().getValue() + ',');
    //cellpercent.setSelectionRange(cellpercent.value.length-1, cellpercent.value.length-1); // Set the new cursor position
    //event.stopImmediatePropagation();
    //event.preventDefault();
    console.log('--------- end beforekeydown -----------')  

  }
});

  </script>
</body>
</html>
